jQuery(document).ready(function($){"use strict";var ajaxurl=window.ajaxurl,framework=window.framework;function getCategoryTermIDSelected(){return $("select.hkb-cat-selector-adm option:selected").val()}function setSelectedCategory(termID){$(".hkb-category-article-list").each(function(){var currentArticleList=$(this),articleTermID=currentArticleList.attr("data-term-id");termID!=articleTermID?($(".hkb-cat-label-"+articleTermID).hide(),currentArticleList.hide()):($(".hkb-cat-label-"+articleTermID).show(),currentArticleList.show())})}$("ul.sortable").sortable({tolerance:"intersect",cursor:"pointer",items:"> li",axi:"y",placeholder:"placeholder",nested:"ul",stop:function(event,ui){}}),setSelectedCategory(getCategoryTermIDSelected()),$("select.hkb-cat-selector-adm").change(function(e){setSelectedCategory(getCategoryTermIDSelected())}),$(".save-order").bind("click",function(){var currentTermID,items;currentTermID=getCategoryTermIDSelected(),items=[],$("ul.hkb-category-article-list-"+currentTermID).each(function(){for(var liElements=$(this).children("li"),i=0;i<liElements.length;i++){var currentLi=$(liElements[i]),articleID=currentLi.attr("data-article-id"),newOrder=10*i+10;currentLi.attr("data-order",newOrder),items.push({articleID:articleID,termID:currentTermID,order:newOrder})}}),$.post(ajaxurl,{action:"save_ht_kb_article_order",items:items,security:framework.ajaxnonce},function(data,textStatus,jqXHR){try{"success"==data.state?$("#ajax-response").html('<div class="message updated fade"><p>'+data.message+"</p></div>"):$("#ajax-response").html('<div class="message error fade"><p>'+data.message+"</p></div>")}catch(err){$("#ajax-response").html('<div class="message error fade"><p>'+framework.ajaxerror+"</p></div>")}$("#ajax-response div").delay(3e3).hide("slow")},"json")})});