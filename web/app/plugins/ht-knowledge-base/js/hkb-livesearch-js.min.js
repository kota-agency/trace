jQuery(document).ready(function($){"use strict";var hkbJSSettings=window.hkbJSSettings,hkbLiveSearchID="hkb-jquery-live-search",searchBox=$(".hkb-site-search__field").liveSearch({url:hkbJSSettings.liveSearchUrl,keepTypingPrompt:hkbJSSettings.keepTypingPrompt,id:hkbLiveSearchID,onShowLiveSearch:clearSelected,triggerLength:hkbJSSettings.triggerLength}),resultsElementSelector=".hkb-searchresults",currentElement=null,parentForm=searchBox.parents("form"),clearSelected=function(){null!=currentElement&&currentElement.removeClass("hkb-searchresults__current")};function scrollToCurrent(){var liveSearchEle=$("#"+hkbLiveSearchID),lsOffset=liveSearchEle.offset().top,lsHeight=liveSearchEle.height(),lsTotal=lsOffset+lsHeight,currentItem=(searchBox.height(),$(resultsElementSelector).find("li.hkb-searchresults__current")),currentOffset=null;currentOffset=void 0===currentItem?0:void 0===(currentOffset=currentItem.offset())?0:currentOffset.top;var selectedItemHeight=null;selectedItemHeight=void 0===currentItem?0:currentItem.height();var currentItemIndex=null;currentItemIndex=void 0===currentItem?0:currentItem.index();var selectedItemFullHeight=selectedItemHeight+currentOffset,currentScroll=liveSearchEle.scrollTop(),liveSearchCount=$(resultsElementSelector).children("li").length;0!==currentItemIndex?currentItemIndex+1!=liveSearchCount?selectedItemFullHeight>lsTotal?liveSearchEle.scrollTop(currentScroll+selectedItemHeight):currentOffset<lsOffset&&liveSearchEle.scrollTop(currentScroll-selectedItemHeight):liveSearchEle.scrollTop(lsHeight+2*selectedItemHeight):liveSearchEle.scrollTop(0)}searchBox.bind("keydown",function(e){switch(e.keyCode){case 9:return;case 40:e.preventDefault(),e.stopPropagation(),$(resultsElementSelector).css("display","block"),null===currentElement||currentElement.length<=0?currentElement=$(resultsElementSelector).find("li").first().addClass("hkb-searchresults__current"):(clearSelected(),currentElement=currentElement.next("li").length<=0?$(resultsElementSelector).find("li").first().addClass("hkb-searchresults__current"):currentElement.next("li").addClass("hkb-searchresults__current")),scrollToCurrent();break;case 38:e.preventDefault(),e.stopPropagation(),null===currentElement||currentElement.length<=0?currentElement=$(resultsElementSelector).find("li").last().addClass("hkb-searchresults__current"):(clearSelected(),currentElement=currentElement.prev("li").length<=0?$(resultsElementSelector).find("li").last().addClass("hkb-searchresults__current"):currentElement.prev("li").addClass("hkb-searchresults__current")),scrollToCurrent();break;case 13:if($(resultsElementSelector).find(".current").length>0&&(currentElement=$(resultsElementSelector).find(".hkb-searchresults__current")),null!==currentElement&&currentElement.length>0){e.preventDefault(),e.stopPropagation();var href=currentElement.find("a").first().attr("href");$(".hkb-searchresults").hide(),clearSelected(),currentElement=null,window.location.href=href;break}parentForm.first().submit();break;case 27:searchBox.trigger("hideLiveSearch")}}),hkbJSSettings.focusSearchBox&&(window.location.hash||jQuery(".hkb-site-search__field").focus())});