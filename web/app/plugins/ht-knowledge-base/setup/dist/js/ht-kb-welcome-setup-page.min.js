!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}}else if("object"===argType)if(arg.toString===Object.prototype.toString)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key);else classes.push(arg.toString())}}return classes.join(" ")}void 0!==module&&module.exports?(classNames.default=classNames,module.exports=classNames):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return classNames}):window.classNames=classNames}()},{}],2:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var classNames=require("classnames"),_wp$i18n=wp.i18n,__=_wp$i18n.__,_wp$components=(_wp$i18n.printf,wp.editor.RichText,wp.components),Spinner=(_wp$components.Toolbar,_wp$components.ToolbarButton,_wp$components.TextControl,_wp$components.TextareaControl,_wp$components.Button,_wp$components.Modal,_wp$components.Dashicon,_wp$components.Spinner),_wp$element=wp.element,Fragment=_wp$element.Fragment,_wp$autop=(_wp$element.useState,wp.autop),WelcomeSetupPage=(_wp$autop.autop,_wp$autop.removep,wp.htmlEntities.decodeEntities,function(_React$Component){_inherits(WelcomeSetupPage,React.Component);var _super=_createSuper(WelcomeSetupPage);function WelcomeSetupPage(props){var _this;return _classCallCheck(this,WelcomeSetupPage),(_this=_super.call(this,props)).state={stage:10},_this.incrementStage=_this.incrementStage.bind(_assertThisInitialized(_this)),_this}return _createClass(WelcomeSetupPage,[{key:"incrementStage",value:function(){this.setState(function(state,props){return{stage:state.stage+10}})}},{key:"stageMap",value:function($original){return Math.floor($original/10)}},{key:"render",value:function(){var _this2=this,welcomeSetupPage=this,showUpgradeNotice=htkbAPISettings.htkbArticlesInstalled;return React.createElement("div",{className:"ht-kb-welcome-setup"},React.createElement("div",{className:"ht-kb-progressbar"},React.createElement("ul",null,[10,20,30].map(function(item){return React.createElement("li",{className:_this2.state.stage===item?"active":"",key:item},welcomeSetupPage.stageMap(item))}))),showUpgradeNotice&&React.createElement(UpgradeNotice,null),{10:React.createElement(ActivateLicenseStage,{setupAssistantPage:this}),20:React.createElement(SetupConfigStage,{setupAssistantPage:this}),30:React.createElement(CompleteStage,{setupAssistantPage:this})}[this.state.stage])}}]),WelcomeSetupPage}()),UpgradeNotice=function(_React$Component3){_inherits(UpgradeNotice,React.Component);var _super3=_createSuper(UpgradeNotice);function UpgradeNotice(props){var _this4;return _classCallCheck(this,UpgradeNotice),(_this4=_super3.call(this,props)).state={},_this4}return _createClass(UpgradeNotice,[{key:"render",value:function(){return React.createElement("div",{className:"ht-kb-welcome-setup__upgradenotice"},React.createElement("h2",{className:"ht-kb-welcome-setup__title"},__("Upgrading Heroic Knowledge Base?")),React.createElement("p",null,__("It looks like you have previously installed Heroic Knowledge Base, you may need to repeat these steps if required, otherwise"),"Â ",React.createElement("a",{href:htkbAPISettings.htkbArticlesAdminListUrl},__("skip to your article list now"))))}}]),UpgradeNotice}(),ActivateLicenseStage=function(_React$Component4){_inherits(ActivateLicenseStage,React.Component);var _super4=_createSuper(ActivateLicenseStage);function ActivateLicenseStage(props){var _this5;return _classCallCheck(this,ActivateLicenseStage),(_this5=_super4.call(this,props)).state={licenseValue:htkbAPISettings.htkbLicenseKey?htkbAPISettings.htkbLicenseKey:"",licenseStatus:htkbAPISettings.htkbLicenseStatus?htkbAPISettings.htkbLicenseStatus:"",licenseStatusMessage:htkbAPISettings.htkbLicenseStatusMessage?htkbAPISettings.htkbLicenseStatusMessage:"",licenseValueChanged:!1,activateLicenseStageMessage:""},_this5.handleLicenseValueChange=_this5.handleLicenseValueChange.bind(_assertThisInitialized(_this5)),_this5.handleActivateButtonClick=_this5.handleActivateButtonClick.bind(_assertThisInitialized(_this5)),_this5.handleSkipButtonClick=_this5.handleSkipButtonClick.bind(_assertThisInitialized(_this5)),_this5}return _createClass(ActivateLicenseStage,[{key:"handleLicenseValueChange",value:function(event){var licenseValueText=event.target.value;licenseValueText=licenseValueText.trim(),this.setState({licenseValue:licenseValueText,licenseValueChanged:!0,licenseStatus:"",licenseStatusMessage:""})}},{key:"handleActivateButtonClick",value:function(event){event.preventDefault(),this.activateKey(this.state.licenseValue)}},{key:"handleSkipButtonClick",value:function(event){event.preventDefault(),this.props.setupAssistantPage.incrementStage(),window.scrollTo(0,0)}},{key:"activateKey",value:function(){var key=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",attempt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,activateLicenseStage=this;if(key.length>0)wp.ajax.send("ht_kb_ws_activate_plugin_key",{data:{wpnonce:htkbAPISettings.activatePluginSecurity,key:key,attempt:attempt},success:function(data){data.done&&(activateLicenseStage.setState({activateLicenseStageMessage:data.message}),data.retry?activateLicenseStage.activateKey(key,data.attempt):data.valid&&setTimeout(function(){activateLicenseStage.props.setupAssistantPage.incrementStage(),window.scrollTo(0,0)},2e3))},error:function(data){data.message;activateLicenseStage.setState({activateLicenseStageMessage:data.message})}});else errorMsg=__("Key cannot be left blank, press skip step to leave the product unactivated"),this.setState({activateLicenseStageMessage:data.message})}},{key:"render",value:function(){return React.createElement("div",{className:"ht-kb-welcome-setup__content"},React.createElement("h2",{className:"ht-kb-welcome-setup__title"},__("Welcome to Heroic Knowledge Base")),React.createElement("p",null,__("Activate your new plugin to unlock automatic updates and enable support for this site.")),React.createElement("form",{action:"#"},React.createElement("div",{className:"ht-kb-licenseinput"},React.createElement("input",{id:"ht-kb_license_key",name:"ht-kb_license_key",type:"text",className:"ht-kb-licenseinput__input",value:this.state.licenseValue,onChange:this.handleLicenseValueChange,placeholder:"********************************"}),React.createElement("div",{className:"ht-kb-license-status"},React.createElement("span",{"data-submit-message":"Please wait, validating and activating key..."}))),this.state.activateLicenseStageMessage.length>0&&React.createElement("p",{className:"ht-kb-info"},React.createElement("span",null,__("Note:")),this.state.activateLicenseStageMessage),"invalid"==this.state.licenseStatus&&React.createElement("div",{className:"ht-kb-license-status-messagearea"},__("This license key is invalid, please check the status in your HeroThemes.com account.")),"valid"==this.state.licenseStatus&&React.createElement("div",{className:"ht-kb-license-status-messagearea"},__("This license key is valid for this site.")),this.state.licenseStatusMessage.length>0&&React.createElement("div",{className:"ht-kb-license-status-moreinfo"},React.createElement("span",null,__("Info:")),this.state.licenseStatusMessage),React.createElement("p",{className:"ht-kb-welcome-setup__actions step"},(this.state.licenseValueChanged||0==this.state.licenseStatus.length)&&React.createElement("a",{href:"#",className:"button-primary button button-large button-next",onClick:this.handleActivateButtonClick},__("Activate")),!this.state.licenseValueChanged&&0<this.state.licenseStatus.length&&React.createElement("a",{href:"#",className:"button-primary button button-large button-disabled",onClick:this.handleActivateButtonClick},__("Activate")),"Â ",React.createElement("a",{href:"#",className:"button button-large button-next",onClick:this.handleSkipButtonClick},__("Skip this step")))))}}]),ActivateLicenseStage}(),SetupConfigStage=function(_React$Component5){_inherits(SetupConfigStage,React.Component);var _super5=_createSuper(SetupConfigStage);function SetupConfigStage(props){var _this6;_classCallCheck(this,SetupConfigStage),(_this6=_super5.call(this,props)).handleInstallContentButtonClick=_this6.handleInstallContentButtonClick.bind(_assertThisInitialized(_this6)),_this6.handleSkipButtonClick=_this6.handleSkipButtonClick.bind(_assertThisInitialized(_this6));var installKBSampleContentDefault=!htkbAPISettings.htkbArticlesInstalled;return _this6.state={htKBInstallSampleContent:installKBSampleContentDefault,installing:!1,done:!1},_this6}return _createClass(SetupConfigStage,[{key:"handleInstallContentButtonClick",value:function(event){var setupConfigStage=this;event.preventDefault();var _this$state=this.state,htKBInstallSampleContent=_this$state.htKBInstallSampleContent,installing=_this$state.installing,done=_this$state.done;if(!htKBInstallSampleContent||installing||done)setupConfigStage.props.setupAssistantPage.incrementStage(),window.scrollTo(0,0);else{setupConfigStage.setState({installing:!0});wp.ajax.send("ht_kb_ws_set_configuration",{data:{wpnonce:htkbAPISettings.setConfigurationSecurity,item:"htKBInstallSampleContent"},success:function(data){setupConfigStage.setState({installing:!1,done:!0},function(){setupConfigStage.props.setupAssistantPage.incrementStage(),window.scrollTo(0,0)})}})}}},{key:"handleSkipButtonClick",value:function(event){event.preventDefault(),this.props.setupAssistantPage.incrementStage(),window.scrollTo(0,0)}},{key:"render",value:function(){var setupConfigStage=this,installing=this.state.installing;return React.createElement("div",{className:"ht-kb-welcome-setup__content"},React.createElement("h2",{className:"ht-kb-welcome-setup__title"},__("Setup")),React.createElement("p",null,__("Setup and Configure your Knowledge Base.")),React.createElement("form",{action:"#"},React.createElement("input",{type:"checkbox","data-id":"ht-kb-install-sample-content",name:"ht-kb-install-sample-content",checked:this.state.htKBInstallSampleContent,onChange:function(e){setupConfigStage.setState({htKBInstallSampleContent:e.target.checked})}}),React.createElement("label",{htmlFor:"ht-kb-install-sample-content"},__("Install Sample Content"),installing&&React.createElement(Spinner,null)),React.createElement("p",{className:"ht-kb-welcome-setup__actions step"},React.createElement("a",{href:"#",className:classNames("button-primary","button","button-large","button-next",{"button-disabled":installing}),onClick:this.handleInstallContentButtonClick},__("Install Selected")),"Â ",React.createElement("a",{href:"#",className:"button button-large button-next",onClick:this.handleSkipButtonClick},__("Skip this step")))))}}]),SetupConfigStage}(),CompleteStage=function(_React$Component6){_inherits(CompleteStage,React.Component);var _super6=_createSuper(CompleteStage);function CompleteStage(props){var _this7;return _classCallCheck(this,CompleteStage),(_this7=_super6.call(this,props)).state={populatedCompleteVariables:!1,defaultKBArchiveUrl:"#",hasArticles:!1,createKBArticleUrl:"#",createKBCategoryUrl:"#",createKBTagUrl:"#",htKBSettingsPageUrl:"#",searchWordPressHTGuideUrl:"#",htKBIntegrationGuideUrl:"#"},_this7}return _createClass(CompleteStage,[{key:"populateCompleteVariables",value:function(){var completeStage=this;wp.ajax.send("ht_kb_ws_get_complete_setup_variables",{data:{wpnonce:htkbAPISettings.getCompleteSetupSecurity},success:function(data){var newState={populatedCompleteVariables:!0};Object.keys(completeStage.state).map(function(key,index){key in data&&(newState[key]=data[key])}),completeStage.setState(newState)}})}},{key:"componentDidMount",value:function(){this.populateCompleteVariables()}},{key:"render",value:function(){var _this$state2=this.state,populatedCompleteVariables=_this$state2.populatedCompleteVariables,defaultKBArchiveUrl=_this$state2.defaultKBArchiveUrl,hasArticles=_this$state2.hasArticles,createKBArticleUrl=_this$state2.createKBArticleUrl,createKBCategoryUrl=_this$state2.createKBCategoryUrl,createKBTagUrl=_this$state2.createKBTagUrl,htKBSettingsPageUrl=_this$state2.htKBSettingsPageUrl,searchWordPressHTGuideUrl=_this$state2.searchWordPressHTGuideUrl,htKBIntegrationGuideUrl=_this$state2.htKBIntegrationGuideUrl;return React.createElement("div",{className:"ht-kb-welcome-setup__content"},React.createElement("h2",{className:"ht-kb-welcome-setup__title"},__("Installation Complete")),React.createElement("p",null,__("Your Knowledge Base has been setup sucessfully and is ready to use")),!populatedCompleteVariables&&React.createElement(Spinner,null),populatedCompleteVariables&&React.createElement("div",{className:"ht-kb-welcome-setup__info"},React.createElement("h3",null,__("Knowledge Base basics","ht-knowledge-base")),React.createElement("ol",null,React.createElement("li",{className:"ht-kb-welcome-action-item"},__("Your knowledge base is ready to view from the "),React.createElement("a",{href:defaultKBArchiveUrl,target:"_blank"},__("The Knowledge Base Archive"),","),"Â ",hasArticles&&React.createElement(Fragment,null,__("and it looks like there is already some content")),!hasArticles&&React.createElement(Fragment,null,__("though it is currently empty, create some knowledge base categories and articles."))),React.createElement("li",null,React.createElement("a",{href:createKBArticleUrl,target:"_blank"},__("Add a new article")),"Â ",__("to create your first Knowledge Base article. These work like other WordPress posts.")),React.createElement("li",null,__("To get the most out of your Knowledge Base you should use several top-level"),"Â ",React.createElement("a",{href:createKBCategoryUrl,target:"_blank"},__("Knowledge Base categories")),"Â ",__("to organize your Knowledge Base.")),React.createElement("li",null,React.createElement("a",{href:createKBTagUrl,target:"_blank"},__("Tags for the Knowledge Base")),"Â ",__("will help users find relevant and related content.")),React.createElement("li",null,__("You can control most options for the Knowledge Base from the"),"Â ",React.createElement("a",{href:htKBSettingsPageUrl,target:"_blank"},__("Knowledge Base Settings page"))),React.createElement("li",null,__("The in-built live search allows users to quickly find answers to their queries right from any page on the Knowledge Base. It also searches Knowledge Base categories and Knowledge Base tags. You can expand the search functionality, see HeroThemes guide on"),"Â ",React.createElement("a",{href:searchWordPressHTGuideUrl,target:"_blank"},__("Search in WordPress"))),React.createElement("li",null,__("If you want to alter the default knowledge base templates, please read"),"Â ",React.createElement("a",{href:htKBIntegrationGuideUrl,target:"_blank"},__("the integration guide here"))))))}}]),CompleteStage}();wp.api.loadPromise.done(function(){var welcomeSetupPageAnchor=document.getElementById("ht-kb-welcome-setup-page");ReactDOM.render(React.createElement(WelcomeSetupPage,null),welcomeSetupPageAnchor)})},{classnames:1}]},{},[2]);