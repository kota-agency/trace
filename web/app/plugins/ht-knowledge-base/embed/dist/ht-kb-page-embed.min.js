!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}(this,result)}}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var _wp$i18n=wp.i18n,__=_wp$i18n.__,Fragment=(_wp$i18n.printf,wp.element.Fragment),_wp$components=wp.components,TextControl=_wp$components.TextControl,Spinner=_wp$components.Spinner,HeroicKnowledgeBasePageEmbed=(_wp$components.Tooltip,function(_React$Component){_inherits(HeroicKnowledgeBasePageEmbed,React.Component);var _super=_createSuper(HeroicKnowledgeBasePageEmbed);function HeroicKnowledgeBasePageEmbed(props){var _this;return _classCallCheck(this,HeroicKnowledgeBasePageEmbed),(_this=_super.call(this,props)).handleClick=_this.handleClick.bind(_assertThisInitialized(_this)),_this.handleOpenToggle=_this.handleOpenToggle.bind(_assertThisInitialized(_this)),_this.handleSearchTextUpdate=_this.handleSearchTextUpdate.bind(_assertThisInitialized(_this)),_this.getSearchResults=_this.getSearchResults.bind(_assertThisInitialized(_this)),_this.state={open:!0,display:"home",articleDisplay:null,searchText:"",searchResults:[]},_this}return _createClass(HeroicKnowledgeBasePageEmbed,[{key:"handleClick",value:function(event){}},{key:"handleOpenToggle",value:function(){this.setState({open:!this.state.open})}},{key:"showArticle",value:function(article){this.setState({display:"article",articleDisplay:article})}},{key:"revertView",value:function(){this.state.searchText.length>0?this.setState({display:"results"}):this.setState({display:"home"})}},{key:"handleSearchTextUpdate",value:function(){var newText=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({searchText:newText}),newText.length>0?(this.getSearchResults(newText),this.setState({display:"results"})):this.setState({display:"home"})}},{key:"clearSearch",value:function(){this.handleSearchTextUpdate("")}},{key:"getSearchResults",value:function(searchText){var articles=new wp.api.collections.HtKb,options={data:{per_page:20,status:["publish"],search:searchText}},controller=this;articles.fetch(options).done(function(){controller.setState({searchResults:articles})})}},{key:"render",value:function(){return React.createElement("div",{className:"ht-kb-page-embed-container"},React.createElement(MainEmbedPanel,{controller:this}))}}]),HeroicKnowledgeBasePageEmbed}()),CloseIcon=function(_React$Component2){_inherits(CloseIcon,React.Component);var _super2=_createSuper(CloseIcon);function CloseIcon(props){return _classCallCheck(this,CloseIcon),_super2.call(this,props)}return _createClass(CloseIcon,[{key:"render",value:function(){return React.createElement("div",{className:"hkbfe-closeicon",onClick:this.props.onClick},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},React.createElement("path",{fill:"#fff",d:"M14.7,1.3c-0.4-0.4-1-0.4-1.4,0L8,6.6L2.7,1.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4L6.6,8l-5.3,5.3 c-0.4,0.4-0.4,1,0,1.4C1.5,14.9,1.7,15,2,15s0.5-0.1,0.7-0.3L8,9.4l5.3,5.3c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3 c0.4-0.4,0.4-1,0-1.4L9.4,8l5.3-5.3C15.1,2.3,15.1,1.7,14.7,1.3z"})))}}]),CloseIcon}(),ArticleIcon=function(_React$Component3){_inherits(ArticleIcon,React.Component);var _super3=_createSuper(ArticleIcon);function ArticleIcon(props){return _classCallCheck(this,ArticleIcon),_super3.call(this,props)}return _createClass(ArticleIcon,[{key:"render",value:function(){return React.createElement("div",{className:"hkbfe-articleicon"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},React.createElement("path",{fill:"#444",d:"M15,15V5l-5-5H2C1.4,0,1,0.4,1,1v14c0,0.6,0.4,1,1,1h12C14.6,16,15,15.6,15,15z M3,2h6v4h4v8H3V2z"})))}}]),ArticleIcon}(),BackIcon=function(_React$Component4){_inherits(BackIcon,React.Component);var _super4=_createSuper(BackIcon);function BackIcon(props){return _classCallCheck(this,BackIcon),_super4.call(this,props)}return _createClass(BackIcon,[{key:"render",value:function(){return React.createElement("div",{className:"hkbfe-backicon"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",strokeWidth:"2",viewBox:"0 0 24 24",height:"24",width:"24"},React.createElement("g",{fill:"none",stroke:"#fff",strokeLinecap:"square",strokeMiterlimit:"10"},React.createElement("circle",{cx:"12",cy:"12",r:"11"}),React.createElement("path",{d:"M14 16L10 12 14 8"}))))}}]),BackIcon}(),ArticleLinkIcon=function(_React$Component5){_inherits(ArticleLinkIcon,React.Component);var _super5=_createSuper(ArticleLinkIcon);function ArticleLinkIcon(props){return _classCallCheck(this,ArticleLinkIcon),_super5.call(this,props)}return _createClass(ArticleLinkIcon,[{key:"render",value:function(){return React.createElement("div",{className:"hkbfe-articlelink"},React.createElement("svg",{viewBox:"0 0 511.626 511.627"},React.createElement("path",{d:"M392.857,292.354h-18.274c-2.669,0-4.859,0.855-6.563,2.573c-1.718,1.708-2.573,3.897-2.573,6.563v91.361 c0,12.563-4.47,23.315-13.415,32.262c-8.945,8.945-19.701,13.414-32.264,13.414H82.224c-12.562,0-23.317-4.469-32.264-13.414 c-8.945-8.946-13.417-19.698-13.417-32.262V155.31c0-12.562,4.471-23.313,13.417-32.259c8.947-8.947,19.702-13.418,32.264-13.418 h200.994c2.669,0,4.859-0.859,6.57-2.57c1.711-1.713,2.566-3.9,2.566-6.567V82.221c0-2.662-0.855-4.853-2.566-6.563 c-1.711-1.713-3.901-2.568-6.57-2.568H82.224c-22.648,0-42.016,8.042-58.102,24.125C8.042,113.297,0,132.665,0,155.313v237.542 c0,22.647,8.042,42.018,24.123,58.095c16.086,16.084,35.454,24.13,58.102,24.13h237.543c22.647,0,42.017-8.046,58.101-24.13 c16.085-16.077,24.127-35.447,24.127-58.095v-91.358c0-2.669-0.856-4.859-2.574-6.57 C397.709,293.209,395.519,292.354,392.857,292.354z"}),React.createElement("path",{d:"M506.199,41.971c-3.617-3.617-7.905-5.424-12.85-5.424H347.171c-4.948,0-9.233,1.807-12.847,5.424 c-3.617,3.615-5.428,7.898-5.428,12.847s1.811,9.233,5.428,12.85l50.247,50.248L198.424,304.067 c-1.906,1.903-2.856,4.093-2.856,6.563c0,2.479,0.953,4.668,2.856,6.571l32.548,32.544c1.903,1.903,4.093,2.852,6.567,2.852 s4.665-0.948,6.567-2.852l186.148-186.148l50.251,50.248c3.614,3.617,7.898,5.426,12.847,5.426s9.233-1.809,12.851-5.426 c3.617-3.616,5.424-7.898,5.424-12.847V54.818C511.626,49.866,509.813,45.586,506.199,41.971z"})))}}]),ArticleLinkIcon}(),MainEmbedPanel=function(_React$Component7){_inherits(MainEmbedPanel,React.Component);var _super7=_createSuper(MainEmbedPanel);function MainEmbedPanel(props){return _classCallCheck(this,MainEmbedPanel),_super7.call(this,props)}return _createClass(MainEmbedPanel,[{key:"render",value:function(){return React.createElement("div",{className:"ht-kb-page-embed-contents"},React.createElement(Fragment,null,("home"==this.props.controller.state.display||"results"==this.props.controller.state.display)&&React.createElement(SearchPanel,this.props),"home"==this.props.controller.state.display&&React.createElement(FeaturedPanel,this.props),"article"==this.props.controller.state.display&&React.createElement(ArticlePanel,this.props),"results"==this.props.controller.state.display&&React.createElement(SearchResultsPanel,this.props)))}}]),MainEmbedPanel}(),SearchPanel=function(_React$Component8){_inherits(SearchPanel,React.Component);var _super8=_createSuper(SearchPanel);function SearchPanel(props){return _classCallCheck(this,SearchPanel),_super8.call(this,props)}return _createClass(SearchPanel,[{key:"render",value:function(){var embedColor=htkbFeEmbedSettings.embedColor;return React.createElement("div",{className:"hkbfe-searchpanel",style:{backgroundColor:embedColor}},React.createElement("div",{className:"hkbfe-container"},React.createElement("div",{className:"hkbfe__text"},__("What can we help with?")),React.createElement(SearchBar,this.props)))}}]),SearchPanel}(),SearchBar=function(_React$Component9){_inherits(SearchBar,React.Component);var _super9=_createSuper(SearchBar);function SearchBar(props){var _this2;return _classCallCheck(this,SearchBar),(_this2=_super9.call(this,props)).dismissSearch=_this2.dismissSearch.bind(_assertThisInitialized(_this2)),_this2}return _createClass(SearchBar,[{key:"dismissSearch",value:function(event){this.props.controller.clearSearch()}},{key:"render",value:function(){var _this3=this;return React.createElement("div",{className:"hkbfe-searchbar"},React.createElement(TextControl,{className:"hkbfe-searchbar__input",placeholder:__("Search the Knowledge Base"),value:this.props.controller.state.searchText,onChange:function(text){return _this3.props.controller.handleSearchTextUpdate(text)}}),this.props.controller.state.searchText.length>0&&React.createElement(CloseIcon,{onClick:this.dismissSearch}))}}]),SearchBar}(),FeaturedPanel=function(_React$Component10){_inherits(FeaturedPanel,React.Component);var _super10=_createSuper(FeaturedPanel);function FeaturedPanel(props){return _classCallCheck(this,FeaturedPanel),_super10.call(this,props)}return _createClass(FeaturedPanel,[{key:"render",value:function(){return React.createElement("div",{className:"hkbfe-popularpanel"},React.createElement("div",{className:"hkbfe-container"},React.createElement("span",{className:"hkbfe-heading"},__("Popular Articles")),React.createElement(PopularArticles,this.props)))}}]),FeaturedPanel}(),PopularArticles=function(_React$Component11){_inherits(PopularArticles,React.Component);var _super11=_createSuper(PopularArticles);function PopularArticles(props){var _this4;return _classCallCheck(this,PopularArticles),(_this4=_super11.call(this,props)).state={popularArticles:[]},_this4}return _createClass(PopularArticles,[{key:"getPopularArticles",value:function(){var articles=new wp.api.collections.HtKb,popularArticles=this;articles.fetch({data:{per_page:12,status:["publish"],orderby:"article_views"}}).done(function(){popularArticles.setState({popularArticles:articles})})}},{key:"componentDidMount",value:function(){this.getPopularArticles()}},{key:"render",value:function(){var popularArticles=this;return React.createElement("div",{className:"hkbfe-articlelist"},this.state.popularArticles.models?this.state.popularArticles.models.map(function(article,index){return React.createElement(ArticleLink,_extends({key:index,article:article},popularArticles.props))}):React.createElement(LoadingArticles,null))}}]),PopularArticles}(),SearchResultsPanel=function(_React$Component12){_inherits(SearchResultsPanel,React.Component);var _super12=_createSuper(SearchResultsPanel);function SearchResultsPanel(props){return _classCallCheck(this,SearchResultsPanel),_super12.call(this,props)}return _createClass(SearchResultsPanel,[{key:"render",value:function(){var searchText=this.props.controller.state.searchText;return React.createElement("div",{className:"hkbfe-searchresults"},React.createElement("div",{className:"hkbfe-container"},React.createElement("span",{className:"hkbfe-heading"},sprintf(__('Search Results for "%s"'),searchText)),React.createElement(SearchResults,this.props)))}}]),SearchResultsPanel}(),SearchResults=function(_React$Component13){_inherits(SearchResults,React.Component);var _super13=_createSuper(SearchResults);function SearchResults(props){return _classCallCheck(this,SearchResults),_super13.call(this,props)}return _createClass(SearchResults,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var searchResults=this,results=this.props.controller.state.searchResults;return React.createElement("div",{className:"hkbfe-resultspanel"},results.models?results.models.map(function(article,index){return React.createElement(ArticleLink,_extends({key:index,article:article},searchResults.props))}):React.createElement(LoadingArticles,null))}}]),SearchResults}(),LoadingArticles=function(_React$Component14){_inherits(LoadingArticles,React.Component);var _super14=_createSuper(LoadingArticles);function LoadingArticles(props){return _classCallCheck(this,LoadingArticles),_super14.call(this,props)}return _createClass(LoadingArticles,[{key:"render",value:function(){return React.createElement("div",{className:"hkbfe-loading"},React.createElement(Spinner,null)," ",__("Loading Articles"))}}]),LoadingArticles}(),ArticleLink=function(_React$Component15){_inherits(ArticleLink,React.Component);var _super15=_createSuper(ArticleLink);function ArticleLink(props){var _this5;return _classCallCheck(this,ArticleLink),(_this5=_super15.call(this,props)).handleClick=_this5.handleClick.bind(_assertThisInitialized(_this5)),_this5}return _createClass(ArticleLink,[{key:"handleClick",value:function(event){event.preventDefault(),this.props.controller.showArticle(this.props.article),window.scrollTo(0,0)}},{key:"render",value:function(){var title=this.props.article.attributes.title.rendered;return React.createElement("div",{className:"hkbfe-articleitem",onClick:this.handleClick},React.createElement(ArticleIcon,null),React.createElement("span",{dangerouslySetInnerHTML:{__html:title}}))}}]),ArticleLink}(),ArticlePanel=function(_React$Component16){_inherits(ArticlePanel,React.Component);var _super16=_createSuper(ArticlePanel);function ArticlePanel(props){var _this6;return _classCallCheck(this,ArticlePanel),(_this6=_super16.call(this,props)).onRevertClick=_this6.onRevertClick.bind(_assertThisInitialized(_this6)),_this6}return _createClass(ArticlePanel,[{key:"onRevertClick",value:function(){this.props.controller.revertView()}},{key:"render",value:function(){var article=this.props.controller.state.articleDisplay,title=article.attributes.title.rendered,embedColor=htkbFeEmbedSettings.embedColor;return React.createElement("div",null,React.createElement("div",{className:"hkbfe-articleheader",style:{backgroundColor:embedColor}},React.createElement("div",{className:"hkbfe-container"},React.createElement("div",{className:"hkbfe__backbtn",onClick:this.onRevertClick},React.createElement(BackIcon,null)),article&&article.attributes.content.rendered&&React.createElement("h1",{className:"hkbfe-articleheader__title"},React.createElement("a",{href:article.attributes.link,target:"_blank"},React.createElement("span",{dangerouslySetInnerHTML:{__html:title}}),React.createElement(ArticleLinkIcon,null))))),article&&article.attributes.content.rendered&&React.createElement("div",{className:"hkbfe-articlecontent"},React.createElement("div",{className:"hkbfe-container",dangerouslySetInnerHTML:{__html:article.attributes.content.rendered}})))}}]),ArticlePanel}(),timer=!1;wp.api.loadPromise.done(function(){!function tryEmbedLoad(){var embedAnchor=document.getElementById("ht-kb-page-embed-anchor");embedAnchor?(ReactDOM.render(React.createElement(HeroicKnowledgeBasePageEmbed,null),embedAnchor),clearTimeout(timer)):timer=setTimeout(function(){tryEmbedLoad()},1e3)}()})},{}]},{},[1]);