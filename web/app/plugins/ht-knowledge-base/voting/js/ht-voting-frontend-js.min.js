jQuery(document).ready(function($){"use strict";function enablePostVoting(){$(".ht-voting-links a").each(function(index){var voteActionAnchor=$(this),enabled=voteActionAnchor.hasClass("enabled"),targetDirection=voteActionAnchor.attr("data-direction"),targetType=voteActionAnchor.attr("data-type"),targetNonce=voteActionAnchor.attr("data-nonce"),targetID=voteActionAnchor.attr("data-id"),targetAllow=voteActionAnchor.attr("data-allow"),targetDisplay=voteActionAnchor.attr("data-display");voteActionAnchor.click(function(event){if(event.preventDefault(),enabled){var data={action:"ht_voting",direction:targetDirection,type:targetType,nonce:targetNonce,id:targetID,allow:targetAllow,display:targetDisplay};$.post(voting.ajaxurl,data,function(response){var commentArea;""!==response&&("post"==targetType?($("#ht-voting-post-"+targetID).replaceWith(response),(commentArea=$("#ht-voting-post-"+targetID).find(".ht-voting-comment").first()).hide(),commentArea.slideDown(500,function(){commentArea.find("textarea").focus()})):"comment"==targetType&&($("#ht-voting-comment-"+targetID).slideUp(500),$("#ht-voting-comment-"+targetID).replaceWith(response),$("#ht-voting-comment-"+targetID).slideDown(500)),enablePostVoting(),$(".ht-voting-comment").each(function(index){var voteCommentAnchor=$(this),targetVoteKey=voteCommentAnchor.attr("data-vote-key"),enabled=voteCommentAnchor.hasClass("enabled"),targetNonce=voteCommentAnchor.attr("data-nonce"),targetID=voteCommentAnchor.attr("data-id"),submitButton=voteCommentAnchor.children("button");submitButton.click(function(event){var feedback=voteCommentAnchor.children("textarea").val();if(event.preventDefault(),enabled){var data={action:"ht_voting_update_feedback",key:targetVoteKey,nonce:targetNonce,comment:feedback,id:targetID};$.post(voting.ajaxurl,data,function(response){voteCommentAnchor.slideUp(500,function(){""!==response&&voteCommentAnchor.html(response),voteCommentAnchor.slideDown(500)})})}else{var msg=$(".voting-login-required").attr("data-ht-voting-must-log-in-msg");alert(msg)}})}))})}else{var msg=$(".voting-login-required").attr("data-ht-voting-must-log-in-msg");alert(msg)}})})}enablePostVoting(),window.globalEnablePostVoting=function(){enablePostVoting()}});