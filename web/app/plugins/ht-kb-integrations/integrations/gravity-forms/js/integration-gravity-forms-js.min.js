jQuery(document).ready(function(a){"use strict";console.log("hkb-integration-gravity-forms-loaded");var b=document.getElementById("ht-kb-suggest-num-results-results-template"),c=_.template(b.innerHTML),d=document.getElementById("ht-kb-suggest-results-template"),e=_.template(d.innerHTML),f=document.getElementById("ht-kb-suggest-no-results-template"),g=_.template(f.innerHTML),h=document.getElementById("ht-kb-suggest-loading-results-template"),i=_.template(h.innerHTML),j=document.getElementById("ht-kb-suggest-all-results-template"),k=_.template(j.innerHTML),l=a("input.hkb_gfsuggest__field"),m=a("input#kb-suggest-endpoint-url").val(),n=a("input.kb-suggest-max-results").val(),o="&per_page="+n,p=a("div.hkb-gfsuggest__resultsinfo"),q=a(".hkb-gfsuggest__results ul"),r=a("div.hkb-gfsuggest__messages"),s=a("div.hkb-gfsuggest__allresults");l.keyup(function(){if(this.value!=this.lastValue){q.parents().removeClass("active"),l.addClass("loading"),p.empty(),q.empty(),r.empty(),s.empty(),r.append(i({}));var b=encodeURIComponent(this.value);this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){a.get(m+b+o,function(d,f,h){var i=h.getResponseHeader("X-WP-Total")||0;l.removeClass("loading"),p.empty(),q.empty(),r.empty(),s.empty(),d.length&&b.length?(p.append(c({resultsCount:i})),q.parents().addClass("active"),a.each(d,function(a,b){q.append(e({item:b}))}),s.append(k({searchTerms:b}))):(q.parents().removeClass("active"),p.append(c({resultsCount:0})),r.append(g({})))})},200),this.lastValue=this.value}}),l.bind("keydown",function(a){switch(a.keyCode){case 13:return!1}})});