!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=jQuery,n=e.n(t),a=wp.i18n,r=wp.apiFetch,i=e.n(r),o=lodash,l=function(e){return new Promise((function(t,r){var l=rankMath.connectData;fetch(rankMath.contentAiUrl+"generate_image_alt",{method:"POST",body:JSON.stringify({images:[e],username:l.username,api_key:l.api_key,site_url:l.site_url,plugin_version:rankMath.version}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(l){if(l.altTexts&&l.altTexts[e])return t(l.altTexts[e]),void function(e){if(!(0,o.isUndefined)(e.credits)){var t=e.credits;(0,o.isEmpty)(t)||(t=(t=t.available-t.taken)<0?0:t,i()({method:"POST",path:"/rankmath/v1/ca/updateCredits",data:{credits:t}}).then((function(){(0,o.isUndefined)(rankMath.ca_credits)||(rankMath.ca_credits=t),(0,o.isUndefined)(rankMath.contentAICredits)||(rankMath.contentAICredits=t),n()(".credits-remaining").length&&n()(".credits-remaining strong").text(t)})))}}(l);r((0,a.__)("Failed to generate alt text.","rank-math"))})).catch((function(e){r(e)}))}))},c=function(){return!rankMath.isUserRegistered||!rankMath.contentAIPlan||!rankMath.contentAICredits||rankMath.contentAiMigrating},m=wp.element,s=wp.components,u=React;function p(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function d(e,t){let n,a,r=[];for(let i=0;i<e.length;i++){const o=e[i];if("string"!==o.type){if(void 0===t[o.value])throw new Error(`Invalid interpolation, missing component node: \`${o.value}\``);if("object"!=typeof t[o.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${o.value}\``);if("componentClose"===o.type)throw new Error(`Missing opening component token: \`${o.value}\``);if("componentOpen"===o.type){n=t[o.value],a=i;break}r.push(t[o.value])}else r.push(o.value)}if(n){const i=function(e,t){const n=t[e];let a=0;for(let r=e+1;r<t.length;r++){const e=t[r];if(e.value===n.value){if("componentOpen"===e.type){a++;continue}if("componentClose"===e.type){if(0===a)return r;a--}}}throw new Error("Missing closing component token `"+n.value+"`")}(a,e),o=d(e.slice(a+1,i),t),l=(0,u.cloneElement)(n,{},o);if(r.push(l),i<e.length-1){const n=d(e.slice(i+1),t);r=r.concat(n)}}return r=r.filter(Boolean),0===r.length?null:1===r.length?r[0]:(0,u.createElement)(u.Fragment,null,...r)}function h(e){const{mixedString:t,components:n,throwErrors:a}=e;if(!n)return t;if("object"!=typeof n){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const r=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(p)}(t);try{return d(r,n)}catch(e){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}var f=function(e){var t=e.tags,n=e.components,a=e.children;return n=n||{},!1===(0,o.isUndefined)(t)&&(t=t.split(",")).forEach((function(e){var t=e;n[e]=wp.element.createElement(t,null)})),h({mixedString:a,components:n})},g=function(e,t){"free"===rankMath.contentAIPlan&&(t+="+Free+Plan");var n=new URLSearchParams({utm_source:"Plugin",utm_medium:t,utm_campaign:"WP"});return(0,o.includes)(e,"?")||(e+="?"),e+n.toString()},k=function(e){var t=e.width,n=void 0===t?40:t,r=e.showProNotice,i=void 0!==r&&r,o=e.isBulkEdit,l=void 0!==o&&o,c=e.isResearch,m=void 0!==c&&c,u=e.creditsRequired,p=void 0===u?0:u;if(i)return function(e){return wp.element.createElement("div",{id:"rank-math-pro-cta",className:"center rank-math-content-ai-warning-wrapper"},wp.element.createElement("div",{className:"rank-math-cta-box blue-ticks top-20 less-padding "+e},wp.element.createElement("h3",null,(0,a.__)("🔒 This is a PRO-Only Feature","rank-math")),wp.element.createElement("p",null,(0,a.__)("We are sorry but this feature is only available to Rank Math PRO/Business/Agency Users. Unlock this feature and many more by getting a Rank Math plan.","rank-math")),wp.element.createElement("ul",null,wp.element.createElement("li",null,(0,a.__)("Bulk Edit SEO Tags","rank-math")),wp.element.createElement("li",null,(0,a.__)("Advanced Google Analytics 4 Integration","rank-math")),wp.element.createElement("li",null,(0,a.__)("Keyword Rank Tracker","rank-math")),wp.element.createElement("li",null,(0,a.__)("Free Content AI Trial","rank-math")),wp.element.createElement("li",null,(0,a.__)("SEO Performance Email Reports","rank-math"))),wp.element.createElement(s.Button,{href:rankMath.links.pro,target:"_blank",className:"button button-primary is-green"},(0,a.__)("Learn More","rank-math"))))}(n);var d=rankMath.isUserRegistered,h=rankMath.contentAIPlan,k="free"===h,w=rankMath.contentAICredits>p,v=rankMath.contentAiMigrating;if(w&&m&&!k&&rankMath.contentAICredits<500&&(w=!1),d&&h&&w&&!v&&!k)return null;var y,b="width-"+n;return!d||!h||w&&k?wp.element.createElement("div",{id:"rank-math-pro-cta",className:"center rank-math-content-ai-warning-wrapper"},wp.element.createElement("div",{className:"rank-math-cta-box blue-ticks top-20 less-padding "+b},wp.element.createElement("h3",null,(0,a.__)("🚀 Supercharge Your Content With AI","rank-math")),wp.element.createElement("p",null,!d&&!l&&(0,a.__)("Start using Content AI by connecting your RankMath.com Account","rank-math"),d&&!h&&!l&&!k&&(0,a.__)("To access this Content AI feature, you need to have an active subscription plan.","rank-math"),d&&!l&&k&&(0,a.__)("To access this Content AI feature, you have to purchase a Content AI Subscription.","rank-math"),l&&(0,a.__)("You are one step away from unlocking this premium feature along with many more.","rank-math")),function(e,t,n){return t?wp.element.createElement("ul",null,wp.element.createElement("li",null,(0,a.__)("Bulk Update Your SEO Meta using AI","rank-math")),wp.element.createElement("li",null,(0,a.__)("Get Access to 40+ AI SEO Tools","rank-math")),wp.element.createElement("li",null,(0,a.__)("125+ Expert-Written Prompts","rank-math")),wp.element.createElement("li",null,(0,a.__)("1-Click Competitor Content Research","rank-math")),wp.element.createElement("li",null,(0,a.__)("1-Click WooCommerce Product Descriptions","rank-math"))):n?wp.element.createElement("ul",null,wp.element.createElement("li",null,(0,a.__)("1-Click Competitor Research","rank-math")),wp.element.createElement("li",null,(0,a.__)("On-Page SEO Suggestions","rank-math")),wp.element.createElement("li",null,(0,a.__)("1-Click Bulk SEO Meta","rank-math")),wp.element.createElement("li",null,(0,a.__)("125+ Pre-Built Prompts","rank-math")),wp.element.createElement("li",null,(0,a.__)("Multiple RankBot Sessions","rank-math"))):40===e?wp.element.createElement("ul",null,wp.element.createElement("li",null,(0,a.__)("1-Click SEO Content","rank-math")),wp.element.createElement("li",null,(0,a.__)("1-Click SEO Meta","rank-math")),wp.element.createElement("li",null,(0,a.__)("40+ Specialized AI Tools","rank-math")),wp.element.createElement("li",null,(0,a.__)("1-Click Competitor Research","rank-math")),wp.element.createElement("li",null,(0,a.__)("125+ Pre-Built Prompts","rank-math"))):wp.element.createElement("ul",null,wp.element.createElement("li",null,(0,a.__)("Gain access to 40+ advanced AI tools, empowering your content strategy.","rank-math")),wp.element.createElement("li",null,(0,a.__)("Experience the revolutionary AI-powered Content Editor for unparalleled efficiency.","rank-math")),wp.element.createElement("li",null,(0,a.__)("Engage with RankBot, your personal AI Chat Assistant, for real-time assistance.","rank-math")))}(n,l,k),!d&&wp.element.createElement(s.Button,{href:rankMath.connectSiteUrl,className:"button button-primary is-green"},(0,a.__)("Connect Now","rank-math")),d&&(!h||k)&&wp.element.createElement(s.Button,{href:g(rankMath.links["content-ai"]+"?play-video=ioPeVIntJWw&","Buy+Plan+Button"),className:"button button-primary is-green",target:"_blank"},(0,a.__)("Learn More","rank-math")))):v?wp.element.createElement("div",{id:"rank-math-pro-cta",className:"center rank-math-content-ai-warning-wrapper"},wp.element.createElement("div",{style:{textAlign:"center"},className:"rank-math-cta-box less-padding top-20 "+b},wp.element.createElement("h3",null,(0,a.__)("Server Maintenance Underway","rank-math")),wp.element.createElement("p",null,(0,a.__)("We are working on improving your Content AI experience. Please wait for 5 minutes and then refresh to start using the optimized Content AI. If you see this for more than 5 minutes, please ","rank-math"),wp.element.createElement("a",{href:rankMath.links.support,target:"_blank",rel:"noreferrer"},(0,a.__)("reach out to the support team.","rank-math")),(0,a.__)(" We are sorry for the inconvenience.","rank-math")))):wp.element.createElement("div",{id:"rank-math-pro-cta",className:"center rank-math-content-ai-warning-wrapper"},wp.element.createElement("div",{className:"rank-math-cta-box less-padding top-20 "+b},wp.element.createElement("h3",null,(0,a.__)("⛔️ Content AI Credit Alert!","rank-math")),wp.element.createElement("p",null,(y=rankMath.contentAIRefreshDate?rankMath.contentAIRefreshDate:"")?wp.element.createElement(f,{components:{strong:wp.element.createElement("strong",null)}},(0,a.sprintf)((0,a.__)("Your monthly Content AI credits have been fully utilized. You can wait till %s for your credits to refresh or upgrade to continue enjoying seamless content creation","rank-math"),"{{strong}}"+y+"{{/strong}}")):(0,a.__)("Your monthly Content AI credits have been fully utilized. To continue enjoying seamless content creation, simply click the button below to upgrade your plan and access more credits.","rank-math")),wp.element.createElement(s.Button,{href:g(rankMath.links["content-ai"]+"?play-video=ioPeVIntJWw&","Buy+Credits+Button"),className:"button button-primary is-green",target:"_blank"},(0,a.__)("Learn More","rank-math")),wp.element.createElement(s.Button,{variant:"link",href:g(rankMath.links["content-ai-restore-credits"],"Buy+Credits+Button"),className:"button button-secondary",target:"_blank"},(0,a.__)("Missing Credits?","rank-math"))))},w=function(e){var t=e.showProNotice,a=void 0!==t&&t,r=e.isBulkEdit,i=void 0!==r&&r,l=e.creditsRequired,c=void 0===l?0:l;(0,o.isNull)(document.getElementById("rank-math-content-ai-modal-wrapper"))&&n()("#wpwrap").append('<div id="rank-math-content-ai-modal-wrapper"></div>'),setTimeout((function(){(0,m.render)(wp.element.createElement(s.Modal,{className:"rank-math-contentai-modal rank-math-modal rank-math-error-modal",shouldCloseOnClickOutside:!0,onRequestClose:function(e){(0,o.isUndefined)(e)||(n()(".components-modal__screen-overlay").remove(),document.getElementById("rank-math-content-ai-modal-wrapper").remove(),document.body.classList.remove("modal-open"))}},wp.element.createElement(k,{width:100,showProNotice:a,isBulkEdit:i,creditsRequired:c})),document.getElementById("rank-math-content-ai-modal-wrapper"))}),100)};function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,A(a.key),a)}}function A(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==v(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}var T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.injectGenerateAltTextButton(t)}var t,r,i;return t=e,r=[{key:"injectGenerateAltTextButton",value:function(e){var t=this;e?wp.media.view.Attachment.Details.TwoColumn=wp.media.view.Attachment.Details.TwoColumn.extend({template:function(n){return t.getTemplate(e?"attachment-details-two-column":"image-details",n,!0)},events:b(b({},wp.media.view.Attachment.Details.TwoColumn.prototype.events),{},{"click .rank-math-generate-alt-button":this.generateAltTextForImage})}):("classic"===rankMath.currentEditor&&(wp.media.view.ImageDetails=wp.media.view.ImageDetails.extend({template:function(e){return t.getTemplate("image-details",e)},events:b(b({},wp.media.view.ImageDetails.prototype.events),{},{"click .rank-math-generate-alt-button":this.generateAltTextForImage})})),wp.media.view.Attachment.Details=wp.media.view.Attachment.Details.extend({template:function(e){return t.getTemplate("attachment-details",e)},events:b(b({},wp.media.view.Attachment.Details.prototype.events),{},{"click .rank-math-generate-alt-button":this.generateAltTextForImage})}))}},{key:"getTemplate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=wp.media.template(e)(t),i=document.createElement("div");if(i.innerHTML=r,!i.querySelector("#alt-text-description"))return r;var o='<button class="rank-math-generate-alt-button" data-two-column="'+n+'"><i class="rm-icon rm-icon-content-ai"></i>'+(0,a.__)("Generate Alt","rank-math")+"</button><br />",l=i.querySelector("#alt-text-description");return l.innerHTML=o+l.innerHTML,i.innerHTML}},{key:"generateAltTextForImage",value:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),c()||rankMath.contentAICredits<50)return n()(".media-modal-close").trigger("click"),void w({creditsRequired:50});var r=this.model.attributes.url;if(r){var i=e.currentTarget,o=i.innerHTML;i.disabled=!0,i.innerHTML=(0,a.__)("Generating…","rank-math");var m="true"===i.getAttribute("data-two-column");l(r).then((function(e){t.model.set("alt",e),"classic"!==rankMath.currentEditor&&t.model.save();var n=m?"#attachment-details-two-column-alt-text":"#attachment-details-alt-text",a=document.querySelector(n);a&&(a.value=e),i.innerHTML=o})).catch((function(e){console.error(e),i.classList.add("failed"),i.innerHTML=(0,a.__)("Failed","rank-math"),setTimeout((function(){i.classList.remove("failed"),i.innerHTML=o}),3e3)})).finally((function(){i.disabled=!1}))}}}],r&&E(t.prototype,r),i&&E(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),M=T;function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(r=a.key,i=void 0,i=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==C(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===C(i)?i:String(i)),a)}var r,i}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addBulkGenerateButton(),this.altTextField=document.querySelector("#attachment_alt"),this.imageUrl=document.querySelector("#attachment_url"),this.altTextField&&this.imageUrl&&this.injectGenerateAltTextButton()}var t,r,o;return t=e,(r=[{key:"addBulkGenerateButton",value:function(){var e=n()(".media-toolbar-secondary");if(!(e.length<=0)){new M(!0);var t='<i class="rm-icon rm-icon-content-ai"></i> '+(0,a.__)("Generate Alt with AI","rank-math"),r=n()('<button class="button media-button button-primary button-large delete-selected-button rank-math-bulk-generate-button hidden" disabled="disabled">'+t+"</button>");e.prepend(r),r.on("click",(function(){if(c()||rankMath.contentAICredits<50)w({creditsLimit:50});else{var e=n()(".attachment.selected").map((function(){return n()(this).data("id")})).get();e.length<=0||(r[0].innerHTML=(0,a.__)("Generating…","rank-math"),i()({method:"POST",path:"/rankmath/v1/ca/generateAlt",data:{attachmentIds:e}}).catch((function(e){console.log(e),r[0].innerHTML=t})).then((function(){r[0].innerHTML=t,window.location.reload()})))}}));var o=wp.media.frame;o.state("library").get("selection").on("selection:single",(function(){r[0].removeAttribute("disabled")})),o.state("library").get("selection").on("selection:unsingle",(function(){n()(".attachment.selected").length||r[0].setAttribute("disabled","disabled")}))}}},{key:"injectGenerateAltTextButton",value:function(){var e=document.createElement("button");e.classList.add("rank-math-generate-alt-button"),e.innerHTML='<i class="rm-icon rm-icon-content-ai"></i>'+(0,a.__)("Generate Alt","rank-math"),this.altTextField.insertAdjacentElement("afterend",e),this.altTextField.insertAdjacentHTML("afterend","<br>"),this.generateAltTextButton=e,e.addEventListener("click",this.generateAltTextForImage.bind(this))}},{key:"generateAltTextForImage",value:function(e){var t=this;if(e.preventDefault(),e.stopPropagation(),c()||rankMath.contentAICredits<50)w({creditsRequired:50});else{var n=this.imageUrl.value;this.generateAltTextButton.innerHTML=(0,a.__)("Generating…","rank-math"),l(n).then((function(e){t.altTextField.value=e,t.generateAltTextButton.innerHTML='<i class="rm-icon rm-icon-content-ai"></i>'+(0,a.__)("Generate Alt","rank-math")})).catch((function(e){console.error("Failed to generate alt text:",e),t.generateAltTextButton.classList.add("failed"),t.generateAltTextButton.innerHTML=(0,a.__)("Failed","rank-math"),setTimeout((function(){t.generateAltTextButton.classList.remove("failed"),t.generateAltTextButton.innerHTML='<i class="rm-icon rm-icon-content-ai"></i>'+(0,a.__)("Generate Alt","rank-math")}),2e3)}))}}}])&&I(t.prototype,r),o&&I(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.addEventListener("load",(function(){new P}))}();