!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r,o=(r=n(1))&&r.__esModule?r:{default:r};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=wp.element,g=m.Component,d=m.render,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,e);var t,n,r,a=l(s);function s(){var e;return c(this,s),(e=a.apply(this,arguments)).state={mapping:JSON.parse(document.querySelector('[name="'.concat(e.props.input,'"]')).value)},e.addMapping=e.addMapping.bind(p(e)),e.deleteMapping=e.deleteMapping.bind(p(e)),e.getMapping=e.getMapping.bind(p(e)),e.updateMapping=e.updateMapping.bind(p(e)),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.populateRequiredMappings(),0===this.getRequiredChoices().length&&this.getMapping().length<1&&this.addMapping(0)}},{key:"addMapping",value:function(e){var t=this.props.keyField,n=t.allow_custom,r=t.choices,o=this.getMapping(),a=0===r.length&&n?"gf_custom":"";o.splice(e+1,0,{key:a,custom_key:"",value:"",custom_value:""}),this.setMapping(o)}},{key:"deleteMapping",value:function(e){var t=this.getMapping();t.splice(e,1),this.setMapping(t)}},{key:"getMapping",value:function(){return this.state.mapping}},{key:"setMapping",value:function(e){var t=this.props.input;this.setState({mapping:e}),document.querySelector('[name="'.concat(t,'"]')).value=JSON.stringify(e)}},{key:"updateMapping",value:function(e,t){var n=this.getMapping();e.key||(e.value=""),n[t]=e,this.setMapping(n)}},{key:"getChoice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(t=this.props.keyField.choices);for(var n=0;n<t.length;n++){var r=t[n],o=r.name||r.value;if(o===e)return t[n];if(r.choices){var a=this.getChoice(e,r.choices);if(a)return a}}return!1}},{key:"getMappedChoices",value:function(){return this.getMapping().filter((function(e){return e.key&&"gf_custom"!==e.key})).map((function(e){return e.key}))}},{key:"getRequiredChoices",value:function(){for(var e=this.props.keyField,t=e.choices,n=e.display_all,r=[],o=0;o<t.length;o++){var a=t[o];if((a.required||n)&&r.push(a.name||a.value),a.choices)for(var c=0;c<a.choices.length;c++){var i=a.choices[c];(i.required||n)&&r.push(i.name||i.value)}}return r}},{key:"populateRequiredMappings",value:function(){for(var e=this.getMapping(),t=this.getRequiredChoices(),n=e.map((function(e){return e.key})),r=0;r<t.length;r++)n.includes(t[r])||e.push({key:t[r],custom_key:"",value:"",custom_value:""});for(var o=0;o<e.length;o++)if(""===e[o].value){var a=this.getChoice(e[o].key);a&&"default_value"in a&&(e[o].value=a.default_value)}this.setMapping(e)}},{key:"countKeyFieldChoices",value:function(){for(var e=this.props.keyField.choices,t=0,n=0;n<e.length;n++)e[n].choices?t+=e[n].choices.length:t++;return t}},{key:"render",value:function(){var e=this,t=this.props,n=t.keyField,r=t.invalidChoices,a=t.limit,c=t.valueField,i=t.input,u=t.inputType,l=this.getMapping(),s=this.countKeyFieldChoices();return React.createElement("table",{className:"gform-settings-generic-map__table",cellSpacing:"0",cellPadding:"0"},React.createElement("tbody",null,React.createElement("tr",{className:"gform-settings-generic-map__row"},React.createElement("th",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--heading gform-settings-generic-map__column--key"},n.title),React.createElement("th",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--heading gform-settings-generic-map__column--value"},c.title),React.createElement("th",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--heading gform-settings-generic-map__column--error"}),React.createElement("th",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--heading gform-settings-generic-map__column--buttons"})),l.map((function(t,p){var f=e.getChoice(t.key);return(React.createElement(o.default,{key:p,mapping:t,choice:f,mappedChoices:e.getMappedChoices(),isInvalid:t.key&&r.includes(t.key),keyField:n,valueField:c,canAdd:n.allow_custom&&(0===a||l.length<=a)||!n.allow_custom&&l.length<s,canDelete:l.length>1&&!f.required&&!n.display_all,addMapping:e.addMapping,deleteMapping:e.deleteMapping,updateMapping:e.updateMapping,index:p,inputId:i,inputType:u}))}))))}}])&&i(t.prototype,n),r&&i(t,r),s}(g);window.initializeFieldMap=function(e,t){d(React.createElement(y,t),document.getElementById(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(2))&&r.__esModule?r:{default:r};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=wp.element,y=d.Component,h=d.Fragment,v=wp.i18n.__,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,r,a=f(c);function c(){return l(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"renderRequiredSpan",value:function(){var e=this.props.choice,t=this.getKeyInputId();return e.required?React.createElement("span",{className:"required",id:t},"*"):null}},{key:"render",value:function(){var e=this.props,t=e.isInvalid,n=e.index;return(React.createElement("tr",{className:"gform-settings-generic-map__row"},React.createElement("td",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--key"},this.getKeyInput(n)),React.createElement("td",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--value"},this.getValueInput()),React.createElement("td",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--error"},t&&React.createElement("svg",{width:"22",height:"22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M11 22C4.9249 22 0 17.0751 0 11S4.9249 0 11 0s11 4.9249 11 11-4.9249 11-11 11z",fill:"#E54C3B"}),React.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.9317 5.0769a.1911.1911 0 00-.1909.2006l.3708 7.4158a.8895.8895 0 001.7768 0l.3708-7.4158a.1911.1911 0 00-.1909-.2006H9.9317zm2.3375 10.5769c0 .701-.5682 1.2693-1.2692 1.2693-.701 0-1.2692-.5683-1.2692-1.2693 0-.7009.5682-1.2692 1.2692-1.2692.701 0 1.2692.5683 1.2692 1.2692z",fill:"#fff"}))),React.createElement("td",{className:"gform-settings-generic-map__column gform-settings-generic-map__column--buttons"},this.getAddButton(),this.getDeleteButton())))}},{key:"getValueInputId",value:function(){var e=this.props,t=e.inputId,n=e.inputType,r=e.index,o=e.mapping;switch(n){case"generic_map":case"dynamic_field_map":return"".concat(t,"_custom_value_").concat(r);default:return"".concat(t,"_").concat(o.key)}}},{key:"getKeyInputId",value:function(){var e=this.props,t=e.inputId,n=e.inputType,r=e.index,o=e.mapping;switch(n){case"generic_map":case"dynamic_field_map":return"".concat(t,"_custom_key_").concat(r);default:return"".concat(t,"_").concat(o.key,"_key")}}},{key:"getKeyInput",value:function(e){var t=this.props,n=t.choice,r=t.keyField,a=t.index,c=t.mapping,u=t.updateMapping,l=r.choices,s=r.display_all,p=r.placeholder,f=this.getKeyInputId();return n.required||s?React.createElement(h,null,React.createElement("label",null,n.label," ",this.renderRequiredSpan()," "),React.createElement(o.default,{tooltip:n.tooltip})):"gf_custom"===c.key?React.createElement("span",{className:"gform-settings-generic-map__custom"},React.createElement("input",{id:f,type:"text",value:c.custom_key,placeholder:p,onChange:function(e){return u(i(i({},c),{},{custom_key:e.target.value}),a)}}),l.length>0&&React.createElement("button",{className:"gform-settings-generic-map__reset",onClick:function(e){e.preventDefault(),u(i(i({},c),{},{key:"",custom_key:""}),a)}},React.createElement("span",{className:"screen-reader-text"},v("Remove Custom Key","gravityforms")))):React.createElement("select",{id:f,value:c.key,onChange:function(e){return u(i(i({},c),{},{key:e.target.value}),a)}},this.getKeyOptions(e))}},{key:"getKeyOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this.props,a=o.keyField,c=o.mappedChoices,i=o.mapping,u=a.allow_custom,l=a.allow_duplicates;t||(t=a.choices);var s=t.map((function(e){return e.name||e.value})),p="select-".concat(e,"-optiongroup-"),f=[];!s.includes("")&&n&&f.push(React.createElement("option",{key:"".concat(p,"-default"),value:"",disabled:!1},v("Select a Field","gravityforms")));for(var m=0;m<t.length;m++){var g=t[m],d=g.name||g.value;if(!g.required){var y=c.includes(d)&&d!==i.key&&!l;g.choices&&g.choices.length>0?f.push(React.createElement("optgroup",{label:g.label,key:"".concat(p,"-").concat(m)},this.getKeyOptions("".concat(e,".").concat(m),g.choices,!1,!1))):f.push(React.createElement("option",{key:"".concat(p,"-").concat(m),value:g.value,disabled:y},g.label))}}return u&&!s.includes("gf_custom")&&r&&f.push(React.createElement("option",{key:"".concat(p,"-custom"),value:"gf_custom",disabled:!1},v("Add Custom Key","gravityforms"))),f}},{key:"getValueInput",value:function(){var e=this.props,t=e.choice,n=e.index,r=e.isInvalid,o=e.mapping,a=e.updateMapping,c=e.valueField,u=t.required,l=this.getValueInputId();return"gf_custom"===o.value?React.createElement("span",{className:"gform-settings-generic-map__custom"},React.createElement("input",{id:l,type:"text",value:o.custom_value,placeholder:c.placeholder,onChange:function(e){return a(i(i({},o),{},{custom_value:e.target.value}),n)}}),React.createElement("button",{className:"gform-settings-generic-map__reset",onClick:function(e){e.preventDefault(),a(i(i({},o),{},{value:"",custom_value:""}),n)}},React.createElement("span",{className:"screen-reader-text"},v("Remove Custom Value","gravityforms")))):React.createElement("select",{id:l,disabled:""===o.key||!o.key,value:o.value,onChange:function(e){return a(i(i({},o),{},{value:e.target.value}),n)},className:r?"gform-settings-generic-map__value--invalid":"",required:u},this.getValueOptions().map((function(e){return e.choices&&e.choices.length>0?React.createElement("optgroup",{key:e.label,label:e.label},e.choices.map((function(e){return React.createElement("option",{key:e.value,value:e.value},e.label)}))):React.createElement("option",{key:e.value,value:e.value},e.label)})))}},{key:"getValueOptions",value:function(){var e=this.props,t=e.choice,n=e.valueField,r=n.allow_custom,o=t.choices||n.choices,a=o.map((function(e){return e.value}));return r&&!a.includes("gf_custom")&&o.push({label:v("Add Custom Value","gravityforms"),value:"gf_custom",disabled:!1}),o}},{key:"getAddButton",value:function(){var e=this.props,t=e.canAdd,n=e.addMapping,r=e.index;return t?React.createElement("button",{className:"gform-settings-generic-map__button gform-settings-generic-map__button--add",onClick:function(e){e.preventDefault(),n(r)}},React.createElement("span",{className:"screen-reader-text"},v("Add","gravityforms"))):null}},{key:"getDeleteButton",value:function(){var e=this.props,t=e.canDelete,n=e.deleteMapping,r=e.index;return t?React.createElement("button",{className:"delete_field_choice gform-st-icon gform-st-icon--circle-minus gform-settings-generic-map__button gform-settings-generic-map__button--delete",onClick:function(e){e.preventDefault(),n(r)}},React.createElement("span",{className:"screen-reader-text"},v("Delete","gravityforms"))):null}}])&&s(t.prototype,n),r&&s(t,r),c}(y);t.default=_},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=wp.element,p=s.Component,f=(s.Fragment,wp.i18n.__,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,r,u=i(l);function l(){return o(this,l),u.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return this.props.tooltip?React.createElement("button",{type:"button",className:"gf_tooltip tooltip","aria-label":this.props.tooltip},React.createElement("i",{className:"gform-icon gform-icon--question-mark","aria-hidden":"true"})):null}}])&&a(t.prototype,n),r&&a(t,r),l}(p));t.default=f}]);